<div class="col-md-6 external-form" *ngIf="isProductLoaded">
    <div class="popup" *ngIf="message !== ''" style="padding: 10px; width: fit-content; background-color: #f5f5f5; border: 1px solid #ddd; border-radius: 10px;">
        <p style="font-size: 20px; margin: 0;">
          <mat-icon style="vertical-align: middle; margin-right: 8px;" color="warn">warning</mat-icon>
          <b>{{ message }}</b>
          <button class="close-button" (click)="closePopup()">×</button>
        </p>
    </div>

    <h3><b>Modifica prodotto</b></h3>
    <div class="form-group">
        <b>Codice Prodotto:</b><input type="text" class="form-control"  placeholder="es: 123" [(ngModel)] = "product.code">
    </div>
    <div class="form-group">
        <b>Nome Prodotto:</b><input type="text" class="form-control"  placeholder="es: Paracetamolo Plus" [(ngModel)] = "product.name" >
    </div>
    <div class="form-group">
        <b>Principio Attivo:</b><input type="text" class="form-control"  placeholder="es: Paracetamolo" [(ngModel)] = "product.activeIngredient" >
    </div>
    <div class="form-group">
        <b>Descrizione:</b><input type="text" class="form-control"  placeholder="Prodotto utile per..." [(ngModel)] = "product.description" >
    </div>
    <div class="form-group">
        <b>Produttore:</b><input type="text" class="form-control"  placeholder="es: PharmaXYZ" [(ngModel)] = "product.producer" >
    </div>
    <div class="form-group">
        <b>Prezzo:</b><input type="number" onkeydown="return event.keyCode !== 69" class="form-control"  placeholder="Price" [(ngModel)] = "product.price" >
    </div>
    <div class="form-group">
        <b>Quantità disponibile:</b><input inputmode="numeric" oninput="this.value = this.value.replace(/\D+/g, '')" class="form-control"  id="quantity" placeholder="Quantità prodotto" [(ngModel)] = "product.quantity">
    </div>
    <div class="category">
        <b>Categoria:</b>
        <select class="form-select" [(ngModel)]="category" [disabled]="!category$">
            <option value="0" disabled selected>Seleziona categoria</option>  
            <option *ngFor="let category of category$" [ngValue]="category">{{category.name}}</option>
        </select>
    </div>
    <div class="form-group">
        <b>Immagine prodotto:</b><br>
        <input type="file" accept=".png,.jpg,.jpeg" (change)="onFileChanged($event)"> 
        <p>(Se lasci il campo vuoto, verrà utilizzata la vecchia immagine.)</p>
    </div>
    <div class="form-group">
        <b>C'è bisogno di una prescrizione?</b>
            <input type="radio" [(ngModel)] = "product.prescription" name = "prescription" [value]="true">Si
        <span class="space"></span>
            <input type="radio" [(ngModel)] = "product.prescription" name = "prescription" [value]="false">No
    </div>
    <div class="form-group">
        <button type="button" (click) = modifyProduct() class="btnSubmit" [disabled]="this.disabled">Modifica</button>
    </div>
    <div class ="content-header">
        <div>
            <a href="/catalog" class="btn btn-primary">Ritorna indietro</a>
        </div>
    </div>
</div>